<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>D.I.Y</title>
  <!-- Blockly 개발자모드 코드 안보이게 막음-->
  <!-- <script type="text/javascript">
    console = {};
      console.log = function(){};
      console.warn = function(){};
      console.error = function(){};
      console.info = function(){}; 

  </script> -->

  <!-- #####################################################################################################  -->
  <!-- ******************************               CDN                       ******************************* -->
  <!-- #####################################################################################################  -->

  <!-- jquery -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <!-- bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
  <!-- tensorflow -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis"> </script>
  <!-- blockly-->
  <script src="/js/blockly/storage.js"></script>
  <script src="/js/blockly/brython.js"></script>
  <script src="/js/blockly/brython_stdlib.js"></script>
  
  <script src="https://unpkg.com/prop-types@15.6/prop-types.js"></script>
  <!-- plotly -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js" charset="utf-8"></script>    
  <!--numjs-->             
  <script src="https://cdn.jsdelivr.net/gh/nicolaspanel/numjs@0.15.1/dist/numjs.min.js"></script>  

  <!-- 기태 처리 (파일) 20.12.29------------------------------------------------------------------------->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/BrowserFS/2.0.0/browserfs.min.js"></script>  
  <!--  Blockly 자체의 설정과 관련된 파일 -->

  <!-- pyodide 파일 처리를 위해서는 아직은 이전 버전을 사용해야 함 from 기태 -->
  <script src="https://pyodide-cdn2.iodide.io/v0.15.0/full/pyodide.js"></script>
  <!-- pyodide cdn변경 20.11.16 -->
  <!--<script src="https://cdn.jsdelivr.net/pyodide/v0.16.1/full/pyodide.js"></script> -->
  <!-- <script src="http://inhatc.iptime.org:4519/pyodide.js"></script>  -->

  <!-- 임시 -->
  <!-- <script type="text/javascript">
    window.languagePluginUrl = "https://pyodide-cdn2.iodide.io/v0.15.0/full/";
  </script>
  <script src="https://pyodide-cdn2.iodide.io/v0.15.0/full/pyodide.js"></script>   -->
  <!-- 임시 -->


  <!--   javascript 언어 규칙 및 블록 변환과 관련된 내용을 압축한 파일 -->
  <script src="/js/blockly/blockly_compressed.js"></script>
  <script src="/js/blockly/javascript_compressed.js"></script>
  <script src="/js/blockly/python_compressed.js"></script>
  <script src="/js/blockly/blocks_compressed.js"></script>
  <!--미리 정의되어 있는 기본 블록에 대한 설정을 모두 담고 있음.-->
  <script src="/js/blockly/block_pyodide.js"></script>

  <!-- codemirror 추가 -->
  <script src="/js/codemirror/lib/codemirror.js"></script>
  <link rel="stylesheet" href="/js/codemirror/lib/codemirror.css">
  <script src="/js/codemirror/mode/javascript/javascript.js"></script>
  <script src="/js/codemirror/mode/python/python.js"></script>
  <!-- codemirror 추가 -->

  <!-- codemirror 스타일 지정 -->
  <link rel="stylesheet" href="./js/codemirror/theme/oceanic-next.css">
  <!-- codemirror 스타일 지정 -->

  <!-- cdoemirror 자동 완성 기능 -->
  <script src="./js/codemirror/addon/hint/show-hint.js"></script>
  <script src="./js/codemirror/addon/hint/javascript-hint.js"></script>
  <script src="./js/codemirror/addon/hint/anyword-hint.js"></script>
  <link rel="stylesheet" href="./js/codemirror/addon/hint/show-hint.css">
  <!-- cdoemirror 자동 완성 기능 -->

  

 

  <!-- canvas -->
  <script src="./js/canvas.js"></script>

  <!-- 그래프 aside -->
  <script src="./js/aside.js"></script>

  <!-- #####################################################################################################  -->
  <!-- ******************************   블록 import                           ******************************* -->
  <!-- #####################################################################################################  -->

  <!-- pyodide 블록 -->
  <script src="/js/blockly/block_pyodide_gen.js"></script>
  <script src="/js/blockly/block_pyodide_gen_javascript.js"></script>
  <!-- pyodide 블록 -->

  <!-- Pandas 블록 -->
  <script src="/js/blockly/block_pandas.js"></script>
  <script src="/js/blockly/block_pandas_gen.js"></script>
  <script src="/js/blockly/block_pandas_javagen.js"></script>
  <!-- Pandas 블록 -->

  <!-- matplot 블록 -->
  <script src="/js/blockly/block_matplot.js"></script>
  <script src="/js/blockly/block_matplot_py.js"></script>
  <script src="/js/blockly/block_matplot_js.js"></script>
  <!-- matplot 블록 -->

  <!-- 입출력 블록 -->
  <script src="/js/blockly/block_io.js"></script>
  <script src="/js/blockly/block_io_py.js"></script>
  <script src="/js/blockly/block_io_js.js"></script>
  <!-- 압출력 블록 -->

  <!-- 연산(통계) 블록 -->
  <script src="/js/blockly/block_static.js"></script>
  <script src="/js/blockly/block_static_py.js"></script>
  <script src="/js/blockly/block_static_js.js"></script>
  <!-- 연산(통계) 블록 -->

  <!-- 테스트용 js
  <script src="/js/blockly/test.js"></script>
  <script src="/js/blockly/test_gen.js"></script>  -->

  <!-- 웹 크롤링  -->
  <script src="/socket.io/socket.io.js"></script> 
  <!-- 웹 크롤링  -->

  <!-- 함수 -->
  <script src="/js/blockly/block_definitions.js"></script>
  <script src="/js/blockly/block_definitions_py.js"></script>
  <script src="/js/blockly/block_definitions_js.js"></script>

  <!-- 클래스 -->
  <script src="/js/blockly/block_class.js"></script>
  <script src="/js/blockly/block_class_py.js"></script>
  <script src="/js/blockly/block_class_js.js"></script>

  <!-- 시스템 -->
  <script src="/js/blockly/block_system.js"></script>
  <script src="/js/blockly/block_system_py.js"></script>
  <script src="/js/blockly/block_system_js.js"></script>

  <!-- 데이타 사이언스 블록 -->
  <script src="/js/blockly/Science_Data_T.js"></script>
  <script src="/js/blockly/Science_Data_Gen.js"></script>
  <script src="/js/blockly/Science_Data_Js.js"></script>

  <!-- 연산 블록 추가 -->
  <script src="/js/blockly/block_oper_js.js"></script>
  <script src="/js/blockly/block_oper_py.js"></script>
  <script src="/js/blockly/block_oper.js"></script>

  <!-- 연산 math 2020-12-29-전우진 -->
  <script src="/js/blockly/block_math.js"></script>
  <script src="/js/blockly/block_math_py.js"></script>
  <script src="/js/blockly/block_math_js.js"></script>

  <!-- 컬렉션 블록 추가 -->
  <script src="/js/blockly/block_collection_js.js"></script>
  <script src="/js/blockly/block_collection_py.js"></script>
  <script src="/js/blockly/block_collection.js"></script>

  <!-- 텍스트 블록 추가 -->
  <script src="/js/blockly/block_text_js.js"></script>
  <script src="/js/blockly/block_text_py.js"></script>
  <script src="/js/blockly/block_text.js"></script>

  <!-- 기계 고장 진단 -->
  <script src="/js/blockly/block_escalator_T.js"></script>
  <script src="/js/blockly/block_escalator_js.js"></script>
  <script src="/js/blockly/block_escalator_python.js"></script>

  <!-- 데이타 사이언스 블록 -->
  <script src="/js/blockly/FileSaver.js"></script> <!-- 파일 저장 기능 -->
  <script src="/js/blockly/tau-prolog.js"></script> <!-- tau Prolog 추가 -->

  <!--neighbors 블록-->
  <script src="/js/blockly/blocks_neighbors.js"></script>
  <script src="/js/blockly/blocks_neighbors_gen.js"></script>
  <script src="/js/blockly/blocks_neighbors_java.js"></script>

  <!-- api 블록 -->
  <script src="/js/blockly/block_api.js"></script>
  <script src="/js/blockly/block_api_gen.js"></script>
  <script src="/js/blockly/block_api_gen_javascript.js"></script>
  <!-- api 블록 -->

  <!-- 명성이형이 만든 블록 2020.12.28 -->
  <script src="/js/blockly/block_numpy1.js"></script>
  <script src="/js/blockly/block_numpy1_py.js"></script>
  <script src="/js/blockly/block_numpy1_js.js"></script>
  <!-- api 블록 -->
  

  <!-- #####################################################################################################  -->
  <!-- ******************************                CSS                      ******************************* -->
  <!-- #####################################################################################################  -->

  <!-- 사이드 바 -->
  <link rel="stylesheet" href="css\sidebar.css">
  
  <!-- table --> 
  <link rel="stylesheet" href="/css/table_custom.css">

  <style type="text/css">
    /* canvas {
      background-color: white;
      border: 1px solid black
    } */

    .btn {
      margin: 10px;
    }

    .file {
      margin: 10px;
    }

    .form-control {
      height: 50%;
    }

    div {
      /*overflow: hidden; 이거 끄니까 코드미러 넘버링나옴 */
      height: auto;
    }

    /* 
    .canvas {
      margin-left: 10px;
    } */

    #pyCodeEditor {
      position: absolute;
      width: 100%;
    }

    #jsCodeEditor {
      position: relative;
      visibility: hidden;
    }
  </style>

  <script>
    var Data_process_on = 0;
    var DL_Gra = 0;
    var testing_1 = 0;
  </script>

  <!-- plotly -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="./js/utils/plotly.js"></script>

  <script>
    languagePluginLoader.then(() => {
      pyodide.loadPackage(['pandas', 'numpy', 'matplotlib', 'scikit-learn', 'micropip']).then(
    () => { // , 'scikit-learn'

        console.log('pyodide 라이브러리 로딩완료');
        $("#loading_image1").hide(); // 로딩 끝나면 로딩 창 없앰 
        $("#runButton1").css({
          'display': "block"
        });
        $("#loading_image2").hide(); // 로딩 끝나면 로딩 창 없앰 
        $("#runButton2").css({
          'display': "inline"
        });
      });
    });
  </script>



  <!--Socket.IO --> 
  <!-- <script>  
    var socket = io.connect('http://localhost:8000');
      // socket.on('CSV_Name_error', function(data) { 
      //   if (data == "error"); 
      //   window.alert("잘못된 입력입니다.");  
      //  });  
  </script>       -->
  <!--Socket.IO -->   


  
  

</head>

<!-- onload : body가 떳을때 작동되는 js입력 -->

<!-- 기태 처리 (파일) 20.12.29 - onload 추가 큰 의미는 없음 ----------------------------------------------->
<body onload="start()">
  <!-- 언어 패키지, 카테고리 색상 -->
  <!-- 2020-12-05 양승국 동적 변경을 위해 head -> body로 옮김-->
  <script id = "lan" src="/js/blockly/msg/js/ko.js"></script> 
  <!-- 그래프 사이드바 -->
  <aside id="sidebar">
    <!-- 그래프 사이드바 닫기 버튼 -->
    <div class="sidebar">
      <button id="runButton2" class="btn btn-outline-success btn-sm mr-1" onclick="runButton();"
        style="display:none;">실행</button>
      <!-- 실행 로딩 중 -->
      <div id="loading_image2" style="display: inline-block;"><object type="image/svg+xml"
          data="Rolling-1s-30px.svg"></object></div>

      <button id = "button_close" class="btn btn-outline-primary btn-sm mr-1" onclick="sidebar_toggle();">닫기</button>
      <button id = "button_clear" class="btn btn-outline-danger btn-sm" onclick="csv_clear();">지우기</button>
      <button id = "button_reset" class="btn btn-outline-danger btn-sm" onclick="sidebar_clear();">전체 초기화</button>
    </div>

    <div id=graph></div>

    <div id=graph1 style="height: 500px; width: 900px;"><img id="pyplotfigure" /></div>
    <!-- <div id=graph2 style="height: 300px;"></div> 
      <div id=graph3 style="height: 300px;"></div>-->
    <div id="csv_show">
    </div>
  </aside>

  <div class="container-fluid">
    <!-- nav -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #f4f6ff;">

      <!-- a -->
      <a class="navbar-brand" href="#"><img src="logo2-2.png" /></a>

      <!-- 왼쪽 구역-->
      <div class="d-flex flex-wrap text-white" style="width: 80%;">

        <!-- 파일 열기 -->
        <div class="input-group col-md-3 ml-3 mt-2 btn-sm custom-file">
          <input type="file" id="file" class="custom-file-input" accept="text/xml"
            onchange="loadBlock(); this.value=null;return false;">
          <label class="custom-file-label mr-1" for="file">파일열기</label>
        </div>

        <!-- 블록 지우기 -->
        <input id="button_block_del" type="button" class="btn btn-outline-secondary btn-sm mr-0" onClick="demoWorkspace.clear();"
          value="블록 지우기" />

        <!-- 블록 저장 -->
        <input id="button_block_save" type="button" class="btn btn-outline-secondary btn-sm " onClick="saveBlock();"
          value="블록 저장" />

        <!-- 블록 탭 -->
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-secondary mr-0" id="visibleBlock">블럭</button>
          <button type="button" class="btn btn-secondary mr-0" id="visibleAll">블럭+코드</button>
          <button type="button" class="btn btn-secondary mr-0" id="visibleCode">코드</button>
        </div>
          
        <!-- 데이터 셋 불러오기  -->
        <!-- <input id="datasets_load" type="button" class="" onClick="datasets_load_lms();"
        value="데이터셋 불러오기" /> -->
        <!-- 데이터 셋 불러오기  -->

        <!-- 탭들 display -->
        <script>
          // 블럭만 보이기
          $('#visibleBlock').click(function () {
            $('#codeDiv1').css({
              'display': "none"
            });
            $('#blocklyDiv').css({
              'display': "block",
              'height' : "65vh"
            });
            $('#codeDiv2').css({
              'width' : '100%'
            });
            // svg width 100%
            $('#codeDiv').attr('class', 'col-md-12'); // 콘솔 창 12
            $('.blocklySvg').attr('width', '100%'); // 블록 창 넓이 
            $('#blocklyDiv').attr('class', 'col-md-12'); // 블록 창 넓이 
            // Blockly 리사이즈
            Blockly.svgResize(demoWorkspace);
          });

          // 전부 보이기
          $('#visibleAll').click(function () {
            $('#blocklyDiv').css({
              'display': "block",
              'height' : "90vh"
            });
            $('#codeDiv1').css({
              'display': "block"
            });
            $('#codeDiv2').css({
              'display': "block"
            });
            $('#blocklyDiv').attr('class', 'col-md-8');
            $('#codeDiv').attr('class', 'col-md-4');
            // Blockly 리사이즈
            Blockly.svgResize(demoWorkspace);
          });

          // 코드만 보이기
          $('#visibleCode').click(function () {
            $('#blocklyDiv').css({
              'display': "none"
            });
            $('#codeDiv1').css({
              'display': "block"
            });
            $('#codeDiv').attr('class', 'col-md-12');
          })
        </script>
      </div>

      <!-- 오른쪽 구역 -->
      <div class="d-flex flex-wrap text-white" style="width: 55%;">

        <!-- 2020-12-05 양승국 언어변경을 위해 생성-->
        <!--언어변환 -->
        <select id="language" class="form-control col-md-2 mt-2 ml-1">
          <option id = "ko" value="kor">Ko</option>
          <option id = "en" value="eng">en</option>
        </select>

        <!-- display 2020.12.24 지원-->
        <!-- <select id="display_select" class="form-control col-md-2 mt-2 ml-1">
          <option value="python">python</option>
          <option value="javascript">javascript</option>
        </select> -->

        <!-- 실행 버튼 -->
        <input id="runButton1" type="button" class="btn btn-outline-success btn-sm mr-1" style="display:none;"
          onClick="runButton()" value="실행" /> <!-- 다시 원상 복귀 style="display:none;" [on click 전] -->
        <!-- 실행 로딩 중 -->
        <div id="loading_image1"><object type="image/svg+xml" data="Rolling-1s-30px.svg"></object></div>
        <!-- 결과 버튼 -->
        <input id="button_console_clear" type="button" class="btn btn-outline-secondary btn-sm mr-1" onClick="clear_result();"
          value="결과 지우기" />

        <!-- 저장 버튼 -->
        <input id="button_code_save" type="button" class="btn btn-outline-secondary btn-sm mr-1" onClick="file_save();"
          value="코드저장" />

        <!-- Button trigger modal -->
        <button id = "button_paint" type="button" class="btn btn-outline-secondary btn-sm mr-1" data-toggle="modal"
          data-target="#staticBackdrop">그림판</button>

        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1"
          aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">그림판</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>

              <div class="modal-body">
                <!-- canvas -->
                <canvas id="canvas" class="canvas" width="300" height="300"></canvas>

              </div>

              <div class="modal-footer">
                <button type="button" class="btn btn-secondary mr-1" data-dismiss="modal">취소</button>
                <!-- reset button -->
                <form>
                  <input type="button" id="reset" class="btn btn-danger mr-1" value="다시 그리기">
                </form>
                <a id="download" download="image.png"><button type="button" class="btn btn-primary"
                    onClick="canvas_save()">그림 저장</button></a>
                <input type="file" id="btn_upload" name="btn_upload" style="display: none;" />
              </div>
            </div>
          </div>
        </div> <!-- 모달 -->

        <!-- 그래프 버튼 -->
        <input id="sidebar_button" type="button" class="btn btn-outline-primary btn-sm" value="그래프"
          onclick="sidebar_toggle()" />

      </div> <!-- 오른쪽 구역 -->
    </nav>

    <!-- 하단 내용 -->
    <div class="row" style="height: 90vh;">

      <!-- 블럭 나오는 부분(왼쪽) -->
      <div id="blocklyDiv" class="col-md-8" style="height: 90vh;"></div>


      <!-- 오른쪽 -->
      <div id="codeDiv" class="col-md-4">
        <div id="codeDiv1">
          <div class="card shadow-sm">
            <div class="text-white bg-dark">
              <h5 id="code" class="my-1 mx-1">코드</h5>
            </div>
            <div style="position:relative; " style="height: 80vh;">
              <dive id="pyCodeEditor"></dive>
              <dive id="jsCodeEditor"></dive>
            </div>
          </div>
        </div>
        <!-- console -->
        <div id="codeDiv2">
          <div class="card mb-6 mt-6 shadow-sm">
            <div class="text-white bg-dark">
              <h5 id="console" class="my-1 mx-1">콘솔</h5>
            </div>
            </textarea>
            <textarea id="exeArea" class="form-control" readonly style="height: 20vh;"></textarea>
          </div>
        </div>
      </div> <!-- 오른쪽 -->
    </div> <!-- 하단 -->
  </div> <!-- container -->

  <!-- Toolbox 정의 -->
  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" class="toolbox" style="display:none">
    
    <!-- #####################################################################################################  -->
    <!-- ******************************   변수(Variable)                           ******************************* -->
    <!-- #####################################################################################################  -->
    <category name="%{BKY_CATEGORY_VARIABLE}" colour="%{BKY_VARIABLES_HUE}" custom="VARIABLE"></category>
     

    <!-- #####################################################################################################  -->
    <!-- ******************************   입출력 ( I/O )                           ******************************* -->
    <!-- #####################################################################################################  -->
     <category name = "입출력(I/O)" colour = "255">
      
      <!-- 데이터 입력 -->
      <block type="input1"></block>


      <!-- 결과출력 text + var -->
      <block type="printtv">
        <value name="content1">
          <shadow type="indata">
            <field name="indata1">메시지</field>
          </shadow>
        </value>
        <value name="content2">
          <block type="variables_get">
            <field name="VAR">variable</field>
          </block>
        </value>
      </block>

      <!-- 결과출력 var -->
      <block type="printc">
        <value name="content">
          <block type="variables_get">
            <field name="VAR">variable</field>
          </block>
        </value>
      </block>

      <!-- 파이썬 코드 입력 -->
      <block type="itdata"></block>

      <block type="indata"></block>

      <block type = "fd_open">
        <value name="text">
          <shadow type="indata">
            <field name="indata1">경로</field>
          </shadow>
        </value>
      </block>

      <block type = "fd_read"></block>

      <block type = "fd_readline"></block>

      <block type = "fd_write">
        <value name="text">
          <block type="variables_get">
            <field name="VAR">variable</field>
          </block>
        </value>
      </block>

      <block type = "fd_close"></block>
    </category>
    <!-- #####################################################################################################  -->
    <!-- ******************************   논리(Logic)  조건, 판단                ******************************* -->
    <!-- #####################################################################################################  -->
    <category name="%{BKY_CATEGORY_LOGIC}" colour="%{BKY_LOGIC_HUE}">
      
      <!-- if -->
      <block type="controls_if">
        <value name="IF0">
          <shadow type="indata">
            <field name="indata1">True</field>
          </shadow>
        </value>
      </block>

      <!-- if_else --> 
      <block type="controls_ifelse">
        <value name="IF0">
          <shadow type="indata">
            <field name="indata1">True</field>
          </shadow>
        </value>
      </block>
      <!-- 비교 블록 -->
      <block type="logic_compare">
        <value name="A">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
        <value name="B">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>
      <!-- true, false -->
      <block type="logic_operation">
        <value name="A">
          <shadow type="indata">
            <field name="indata1">True</field>
          </shadow>
        </value>
        <value name="B">
          <shadow type="indata">
            <field name="indata1">True</field>
          </shadow>
        </value>
      </block>
      <!-- not 블록-->
      <block type="logic_negate">
        <value name="BOOL">
          <shadow type="indata">
            <field name="indata1">True</field>
          </shadow>
        </value>
      </block>
      <!-- 참, 거짓 -->
      <block type="logic_boolean"></block>
      <!-- null값 -->
      <block type="logic_null"></block>
      <!-- 삼항연산자 -->
      <block type="logic_ternary">
        <value name="THEN">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="ELSE">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      <block type="logic_ternary2">
        <value name="THEN">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="ELSE">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>  <!-- 삼항 표현식 ? - : --->
    </category>
    <!-- #####################################################################################################  -->
    <!-- ******************************   반복(Repeat)                           ******************************* -->
    <!-- #####################################################################################################  -->
    <category name="%{BKY_CATEGORY_REPEAT}" colour="%{BKY_LOOPS_HUE}">
      <!--repeat1-->
      <block type="controls_repeat">
        <value name="count">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>
      <!-- for 문 1 -->
      <block type="py_for">
        <value name="item">
          <block type="variables_get">
            <field name="VAR">i</field>
          </block>
        </value>
        <value name="list">
          <shadow type="indata">
            <field name="indata1">number</field>
          </shadow>
        </value>
      </block>
      <!-- for 문 2 -->
      <block type="py_for">
        <value name="item">
          <shadow type="indata">
            <field name="indata1">x, y</field>
          </shadow>
        </value>
        <value name="list">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      
      <!--repeat2-->
      <block type="controls_repeat2">
        <value name="variable">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
        <value name="count">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>
      <!--new_while-->
      <block type="controls_whileTorF">
        <value name="BOOL">
          <shadow type="indata">
            <field name="indata1">True</field>
          </shadow>
        </value>
      </block>
      
      <!-- 범위1 블록 -->
      <block type="range1">
        <value name="VALUE1">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
        <value name="VALUE2">
          <shadow type="indata">
            <field name="indata1">5</field>
          </shadow>
        </value>
      </block>
      <!-- 범위2 블록 -->      
      <block type="range2">
        <value name="VALUE1">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>
      <!-- 범위3 블록 -->      
      <block type="range3">
        <value name="x">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
        <value name="y">
          <shadow type="indata">
            <field name="indata1">0</field>

          </shadow>
        </value>
        <value name="z">
          <shadow type="indata">
            <field name="indata1">1</field>
          </shadow>
        </value>
      </block>
      <!-- break 블록 -->      
      <block type="break_block"></block>
      <!-- continue 블록 -->      
      <block type="continue_block"></block>

    </category>
    <!-- 2020-12-26 양승국 end -->

    <!-- #####################################################################################################  -->
    <!-- ******************************   연산(Operation)                       ******************************* -->
    <!-- #####################################################################################################  -->
    <category name="%{BKY_CATEGORY_OPERATION}" colour="%{BKY_MATH_HUE}">
      <label text="import"></label>
      <block type = "static_library"></block>
      <block type = "random_library"></block>
      <block type = "math_library"></block>
      <label text="수학"></label>
      <block type="math_number">
        <field name="NUM">0</field>
      </block>

      <!-- 연산블럭 -->
      <block type="Oper">
        <value name="A">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
        <value name="B">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>

      <!-- 제곱근 부터~ -->
      <block type="math_single">
        <value name="NUM">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>

      <!-- 사인, 코사인 -->
      <block type="math_trig">
        <value name="NUM">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>
    
      <!-- 반올림 -->
      <block type="math_round">
        <value name="NUM">
          <shadow type="indata">
            <field name="indata1">0</field>
          </shadow>
        </value>
      </block>
      
      <!-- 합, 최소, 최대값 등-->
      <block type="math_on_list">
        <value name="LIST">
          <shadow type="indata">
            <field name="indata1">list</field>
          </shadow>
        </value>
      </block>

      <!-- 이건 뭔지 모르겠음
      <block type="math_constrain">
        <value name="VALUE">
          <shadow type="indata">
            <field name="indata1">50</field>
          </shadow>
        </value>
        <value name="LOW">
          <shadow type="indata">
            <field name="indata1">1</field>
          </shadow>
        </value>
        <value name="HIGH">
          <shadow type="indata">
            <field name="indata1">100</field>
          </shadow>
        </value>
      </block> -->
      
      <!-- 형변환  -->
      <block type="convert_block">
        <value name="A">
          <shadow type="indata">
            <field name="indata1">1</field>
          </shadow>
        </value>
      </block>
     
      
      <!--2020-12-29 전우진 math1  -->

      
      <block type = "math1">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type = "math2">
        <value name="va1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="va2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type = "math3"></block>

      <!--2020-12-29 전우진 math1 end -->
      <label text="통계"></label>

      <block type = "statistics1">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type = "statistics2">
        <value name="va1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="va2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <label text="랜덤"></label>

      <block type = "random1">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type = "random2">
        <value name="va1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="va2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>


    </category>

    <!-- #####################################################################################################  -->
    <!-- ******************************   문자 ( Text )                         ******************************* -->
    <!-- #####################################################################################################  -->
    <category name="%{BKY_CATEGORY_TEXT}" colour="%{BKY_TEXTS_HUE}"> 
      <!-- text -->
      <block type="text"></block>
      <block type="text_join"></block>
      <!-- len -->
      <block type="text_length">
        <value name="VALUE">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      <!-- find-->
      <block type="text_indexOf">
        <value name="VALUE">
          <block type="variables_get">
            <field name="VAR">text</field>
          </block>
        </value>
        <value name="FIND">
          <shadow type="text">
            <field name="TEXT">abc</field>
          </shadow>
        </value>
      </block>
      <!-- a[0] -->
      <!-- <block type="text_charAt">
        <value name="VALUE">
          <block type="variables_get">
            <field name="VAR">text</field>
          </block>
        </value>
        <value name="AT">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block> -->
      <!-- a[ :0] -->
      <!-- <block type="text_getSubstring">
        <value name="STRING">
          <block type="variables_get">
            <field name="VAR">text</field>
          </block>
        </value>
        <value name="AT1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="AT2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block> -->
      <!-- upper, lower -->
      <block type="text_changeCase">
        <value name="TEXT">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      <!-- 문자 개수 세기 -->
      <block type="text_count">
        <value name="TEXT">
          <block type="variables_get">
            <field name="VAR">text</field>
          </block>
        </value>
        <value name="SUB">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <!-- trim -->
      <block type="text_trim">
        <value name="TEXT">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <!-- 문자열 변경 -->
      <block type="text_replace">
        <value name="TEXT">
          <block type="variables_get">
            <field name="VAR">text</field>
          </block>
        </value>
        <value name="A">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="B">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
    </category>

    <!-- #####################################################################################################  -->
    <!-- ******************************   리스트 , 컬렉션(Collection)             ******************************* -->
    <!-- #####################################################################################################  -->
    <category name="%{BKY_CATEGORY_COLLECTION}" colour="%{BKY_COLLECTION_HUE}"> 
      <label text="LIST"></label>
      <block type = "create_list">
        <value name="text">
          <shadow type="indata">
            <field name="indata1">1,2,3,4</field>
          </shadow>
        </value>
      </block>

      <!-- 리스트 삽입 -->
      <block type="list_insert">
        <value name="LIST">
          <shadow type="indata">
            <field name="indata1">my_list</field>
          </shadow>
        </value>
        <value name="INDEX">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="VALUE">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type="list_sort_reverse">
        <value name="LIST">
          <shadow type="indata">
            <field name="indata1">my_list</field>
          </shadow>
        </value>
      </block>

      <block type="create_new_list">
        <value name="NUMBER_TO_CHECK">
           <shadow type="indata">
             <field name="indata1">my_list</field>
           </shadow>
         </value>
         <value name="DIVISOR">
           <shadow type="indata">
             <field name="indata1"></field>
           </shadow>
         </value>
       </block>
      
      <block type ="forif">
        <value name="SET1">
          <shadow type="indata">
            <field name="indata1">리턴</field>
          </shadow>
        </value>
        <value name="SET2">
          <block type="variables_get">
            <field name="VAR">i</field>
          </block>
      </value>
        <value name="SET3">
          <shadow type="indata">
            <field name="indata1">범위</field>
          </shadow>
        </value>
        <value name="SET4">
          <shadow type="indata">
            <field name="indata1">조건</field>
          </shadow>
        </value>
      </block>

      <block type ="forif2">
        <value name="SET1">
          <shadow type="indata">
            <field name="indata1">리턴</field>
          </shadow>
        </value>
        <value name="SET2">
          <block type="variables_get">
            <field name="VAR">i</field>
          </block>
      </value>
        <value name="SET3">
          <shadow type="indata">
            <field name="indata1">범위</field>
          </shadow>
        </value>
      </block>

      <!-- 비어있는 리스트 생성 -->
      <block type="lists_create_with">
        <mutation items="0"></mutation>
      </block>
       <!-- 리스트의 길이 -->
       <block type="lists_length">
        <value name="VALUE">
          <block type="variables_get">
            <field name="VAR">my_list</field>
          </block>
        </value>
      </block>
      <!-- 리스트가 비어있는지 확인 -->
      <block type="lists_isEmpty">
        <value name="VALUE">
          <block type="variables_get">
            <field name="VAR">my_list</field>
          </block>
        </value>
      </block>

      <label text="TUPLE"></label>
      <!-- 튜플블록 -->
      <block type = "create_tuple">
        <value name="text">
          <shadow type="indata">
            <field name="indata1">1,2,3,4</field>
          </shadow>
        </value>
      </block>

      <label text="SET"></label>
      <!-- 집합블록 -->
      <block type = "create_ziphap">
        <value name="text">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>      

      <block type = "set_menu1"></block>

      <label text="DICTIONARY"></label>
      <!-- 딕셔너리1 -->
      <block type = "create_dict">
        <value name="text">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>  

      <block type ="dic_menu1">
        <value name="dic1">
            <block type="variables_get">
              <field name="VAR">dic</field>
            </block>
        </value>
        <value name="dic2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="dic3">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <!-- 딕셔너리2 
      <block type = "dict1"></block>
      -->
      <!-- 리스트 생성 -->
      <!-- <block type="lists_create_with"></block> -->
      <!-- 변수명 이렇게 하면 잘들어가지긴함
        <value name="ADD0">
          <shadow type="indata">
            <field name="indata1">1</field>
          </shadow>
        </value>
        <value name="ADD1">
          <shadow type="indata">
            <field name="indata1">2</field>
          </shadow>
        </value>
        <value name="ADD2">
          <shadow type="indata">
            <field name="indata1">3</field>
          </shadow>
        </value> -->
    
      <!-- 같은 내용을 n번 넣어 리스트 생성 -->
      <!-- <block type="lists_repeat">ITEM
        <value name="ITEM">
          <shadow type="indata">
            <field name="indata1">1,2,3,4</field>
          </shadow>
        </value>
        <value name="NUM">
          <shadow type="indata">
            <field name="indata1">5</field>
          </shadow>
        </value>
      </block> -->
      <!-- split -
      <block type="lists_split">
        <value name="INPUT">
          <block type="variables_get">
            <field name="VAR">my_list</field>
          </block>
        </value>
        <value name="DELIM">
          <shadow type="indata">
            <field name="indata1">,</field>
          </shadow>
        </value>
      </block>
      -->
      <!-- <block type="tfarraylen"></block>  -->


      <!-- 튜플 -->
      <!-- <block type="tuple"></block> -->
      <!-- 새 블록  딕셔너리 -->
      <!-- <block type="dict"></block> -->

      <!-- 딕셔너리 옵션 -->
      <!-- <block type="dic_menu">
        <value name="dic1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="dic2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="dic3">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block> -->
      <!-- 집합 -->
      <!-- <block type="set">
        <value name="SET">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block> -->
      <!-- 집합선택 -->
      
      <!-- <block type="set_menu">
        <value name="SET1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="SET2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block> -->
      <!-- 연산에 있음 <block type="sump"></block> -->
      <!-- sort,reverse -->

      <!-- 리스트에서 값 찾기 
      <block type="list_index">
        <value name="LIST">
          <shadow type="indata">
            <field name="indata1">my_list</field>
          </shadow>
        </value>
        <value name="INDEX">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      -->


      <!-- remove, pop, count, extend 
      <block type="list_remove_pop_count_extend">
        <value name="LIST">
          <shadow type="indata">
            <field name="indata1">my_list</field>
          </shadow>
        </value>
        <value name="VALUE">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>

      </block>
      -->

      <!-- 리스트 자르기 -->
      <!-- <block type="list_dot">
        <value name="list">
          <shadow type="indata">
            <field name="indata1">my_list</field>
          </shadow>
        </value>
        <value name="a">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="b">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
   -->
      <!-- return 반환
      <block type="py_return"></block>
      -->

      <!-- 인덱스 가져오기 -->
      <!-- <block type="array_select">
        <value name="array_var"> 
          <block type="variables_get">
            <field name="VAR">array</field>
          </block>
        </value>
      </block> -->
      <!-- 2020-12-27-전우진 global -->


    </category>

    <!-- #####################################################################################################  -->
    <!-- ******************************   함수&클래스     //                     ******************************* -->
    <!-- #####################################################################################################  -->
    <!-- 커스텀 블록 -->
    <!-- 함수 -->
    <!-- <category name="기존함수(Function)" colour="%{BKY_PROCEDURES_HUE}" custom="PROCEDURE"></category> -->

    <category name="%{BKY_CATEGORY_FUNCTION}" colour="%{BKY_PROCEDURES_HUE}"> <!--함수 (Function)-->
      <!-- 클래스 -->
      <block type="webclass">
        <value name="class">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      <!-- self -->
      <block type="self">
        <value name="varset">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      <!-- 클래스 self -->
      <block type="self_block"></block>  
      <block type="class_use"></block> 
      <block type="class_make"></block>
      <!-- 함수 -->
      <block type="webdefine">
        <value name="1">
          <block type="variables_get">
            <field name="VAR">func</field>
          </block>
        </value>
        <value name="2">
          <shadow type="indata">
            <field name="indata1">x</field>
          </shadow>
        </value>
      </block>
      <!-- return -->
      <block type="webreturn2">
        <value name="return">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block> 
      <!-- return1 -->
      <block type="func_return1"></block>
      <block type="func_return11"></block>

      <!-- return2 -->
      <block type="func_return2"></block>

      <block type="global">
        <value name="text">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
    </category>


    <!-- 클래스 준비중 -->
    <!-- <category name="기존클래스" colour="%{BKY_CLASS_HUE}">
    
      클래스 
      <block type="python_class"></block>
      클래스 

      클래스 함수 
      
        <value name="ADD">
          <block type="variables_get">
                <field name="VAR">param</field>
              </block>
            </value>
           
      <block type="class_func">
        <value name="class_func_val">
          <block type="class_func_param">
            <value name="ADD0">
              <shadow type="indata">
                <field name="indata1">self</field>
              </shadow>
            </value>
          </block>
        </value> 
      </block>  
      클래스 함수 
      
       클래스 함수 return
       <block type="class_func_return">
        <value name="class_func_return_param">
          <block type="class_func_param">
          
          </block>
        </value> 
      </block>  
      클래스 함수 return

       클래스 =
       <block type="function__parameter">
        <value name="function__parameter_val">
          <block type="class_func_param"></block>
        </value> 
       </block>  
      클래스 =


       클래스 connect 
       <block type="class_instance"></block>
       클래스 connect

      객체 
      <block type="class_refer">
        <value name="class_refer_val">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
      </block>
      객체 

      객체 함수
      <block type="class_instance_function">
        <value name="class_instance_functions"> 
          <block type="class_func_param"></block> 
        </value> 
      </block>  
      객체 함수
  
  </category> -->

   <!--클래스 (Class)-->
  <!-- <category name="%{BKY_CATEGORY_CLASS}" colour="%{BKY_CLASS_HUE}">
      <block type="webclass">
        <value name="class">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      <block type="self">
        <value name="varset">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
    
    </category> -->

    <category name="시스템(sys)" colour="#FF0000">
      <label text="import"></label>

      <block type="pyodide_library"></block>
      <block type="os_library"></block>
      <block type="pickle_library"></block>
      <block type="datetime_library"></block>
      <block type="shutil_library"></block>
      
      
      <label text="Pickle"></label>
      <block type="pickle_dump"></block>
      <block type="pickle_load"></block>

      <label text="OS"></label>

      <block type="os_getcwd">
      
      </block>
      <block type="os_listdir">

      </block>
      
      <block type="os_mkdir">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type="os_rmdir">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type="os_chdir">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type="os_remove">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type="os_rename">
        <value name="va1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="va2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>


      <label text="DateTime"></label>
      <!-- datetime 객체 생성 리성주-->
      <block type = "datetime_now">
        <value name = "variables">
          <block type="variables_get">
            <field name="VAR">day</field>
          </block>
        </value>
      </block>
      <!-- 년도, 년, 월, 일, 시, 분, 초 사용 -->
      <block type = "now_method">
        <value name = "object">
          <block type="variables_get">
            <field name="VAR">day</field>
          </block>
        </value>
      </block>

      <label text="Shutil"></label>

      <block type="shutil_copy">
        <value name="va1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="va2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type="shutil_copytree">
        <value name="va1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="va2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <block type="shutil_move">
        <value name="va1">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="va2">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

    </category>
    <sep></sep>



    <!-- #####################################################################################################  -->
    <!-- ******************************   데이타 사이언스 //  2020 - 09 - 07     ******************************* -->
    <!-- #####################################################################################################  -->
    <!-- # numpy function # -->


    <category name="%{BKY_CATEGORY_NUMPY}" colour="%{BKY_NUMPY_HUE}"> <!--넘파이(Numpy)-->

      <!-- import numpy as np -->
      <block type="numpy_library"></block>
      <!-- import numpy as np -->

       <!-- 넘파이 기본연산 -->
       <block type="numpy_operator">
        <value name="numpy_operator_val">
          <block type="class_func_param"></block>
        </value> 
      </block>
      <!-- 넘파이 기본연산 -->


       <!-- 넘파이 인덱스/값 검색 -->
       <block type="numpy_index_values">
        <value name="numpy_index_values_val">
          <block type="class_func_param"></block>
        </value> 
      </block>
      <!-- 넘파이 인덱스/값 검색 -->

       <!-- 행렬 연산-->
       <block type="numpy_array_operator">
        <value name="numpy_array_operator_val">
          <block type="class_func_param"></block>
        </value> 
      </block>
      <!-- 행렬 연산 -->

      <!-- CSV 저장 -->
      <block type="data_to_csv"></block>
      <!-- CSV 저장 -->

      <!-- data_conversion-->
      <block type="data_conversion"></block>
      <!-- data_conversion -->

      <!-- numpy_concatenate -->
      <block type="np_concatenate"></block>
      <!-- numpy_concatenate -->

      <!-- numpy.array -->
      <block type="np_array">
        <value name="np_array_val">
          <block type="create_arry"></block>
        </value>
      </block>
      <!-- numpy.array -->

       <!-- numpy.array -->
       <block type="np_array"></block>
       <!-- numpy.array -->

      <!-- numpy.arrage -->
      <block type="np_arrange"></block>
      <!-- numpy.arrage -->


      <!-- numpy.zeros -->
      <block type="numpy_zeros"></block>
      <!-- numpy.zeros -->

      <!-- numpy.full  -->
      <block type="numpy_full"> </block>
      <!-- numpy.full  -->

      <!-- np.eye   -->
      <block type="numpy_eye"></block>
      <!-- np.eye   -->

      <!-- np.max_min  -->
      <block type="numpy_max_min"></block>
      <!-- np.max_min  -->
      <sep></sep>
      <!-- np.shape  -->
      <block type="numpy_shape"></block>
      <!-- np.shape  -->

      <!-- np.reshape  -->
      <block type="numpy_reshape"> </block>
      <!-- np.reshape  -->

      <!-- np.reshape  -->
      <block type="np_flatten"> </block>
      <!-- np.reshape  -->

      <!--  random. randn or randint   -->
      <block type="numpy_random_rand">
        <value name="numpy_random_rand_lib_val">
          <block type="variables_get">
            <field name="VAR">np</field>
          </block>
        </value>

        <value name="numpy_random_rand_num1">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>

        <value name="numpy_random_rand_num2">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>
      </block>
      <!--  random. randn or randint   -->

      <!--  np.exp  -->
      <block type="numpy_exp"></block>
      <!--  np.exp  -->

      <!--  np.mean  -->
      <block type="np_mean"></block>
      <!--  np.mean  -->

      <!--  np.diff  -->
      <block type="np_diff_"></block>
      <!--  np.diff  -->


      <!-- np.append -->
      <block type="np_arry_change"></block>
      <!-- np.append -->

      <!-- np.prod -->
      <block type="np_prod"></block>
      <!-- np.prod -->

      <!-- np.fft -->
      <block type="np_fft_fft"></block>
      <!-- np.fft -->


      <!-- np.abs -->
      <block type="nump_abs"></block>
      <!-- np.abs -->

      

      <!--  import sklearn  -->
      <!-- <block type="lib_import_sklearn"></block> -->
      <!--  import sklearn  -->

    </category>
    <!-- 명성이형이 수정한 넘파이 2020.12.28 -->
     <!-- 통계 / 순서 -->
     <category name="넘파이수정" colour="%{BKY_NUMPY_HUE}">
      <label text="통계"></label>
      <block type="numpy_order_static">
      <value name="numpy_order_static_val">
        <block type="class_func_param"></block>
      </value>  
    </block>
    <!-- 통계 / 순서  -->

    <!-- 통계 / 평균 & 분산  -->
    <block type="numpy_averages_variances">
      <value name="numpy_Averages_variances_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block>
    <!-- 통계 / 평균 & 분산  -->

    <!-- 통계 / 상관 -->
    <block type="numpy_correlating">
      <value name="numpy_Correlating_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block>
    <!-- 통계 / 상관 -->

    <label text="정렬"></label>
    <!-- 정렬 -->
    <block type="numpy_sorting">
      <value name="numpy_Sorting_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 정렬 -->

    <!-- 검색 -->
    <block type="numpy_searching">
      <value name="numpy_Searching"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 검색 -->

    <label text="랜덤"></label>
    <!-- 랜덤 / 단순 -->
    <block type="numpy_random_sample">
      <value name="numpy_Random_sample_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 랜덤 / 단순 -->

    <!-- 랜덤 / 순열  -->
    <block type="numpy_random_permutations">
      <value name="numpy_Random_Permutations_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 랜덤 / 순열  -->

    <!-- 랜덤 / 분포1  -->
    <block type="numpy_random_distributions">
      <value name="numpy_Random_Distributions_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 랜덤 / 분포1  -->

     <!-- 랜덤 / 분포2  -->
     <block type="numpy_random_distributions_two">
      <value name="numpy_Random_Distributions_two_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 랜덤 / 분포2  -->

     <!-- 랜덤 / 분포3 -->
     <block type="numpy_random_distributions_third">
      <value name="numpy_Random_Distributions_third_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 랜덤 / 분포3  -->

     <!-- 랜덤 / 생성기 -->
     <block type="numpy_random_generator">
      <value name="numpy_Random_generator_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 랜덤 / 생성기  -->

    <label text="수학"></label>
    <!-- 수학 / 삼각 -->
    <block type="numpy_mathematical_functions">
      <value name="numpy_Mathematical functions_val"> 
        <block type="class_func_param"></block>
      </value>   
    </block> 
    <!-- 수학 / 삼각  -->

    <!-- 수학 / 쌍곡 --> 
    <block type="numpy_hyperbolic_functions">
      <value name="numpy_Hyperbolic functions_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 수학 / 쌍곡  -->


    <!-- 수학 / 반올림 --> 
    <block type="numpy_rounding">
      <value name="numpy_Rounding_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 수학 / 반올림  -->

    <!-- 수학 / 지수 & 로그 --> 
    <block type="numpy_exponents_logarithms">
      <value name="numpy_Exponents_logarithms_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 수학 / 지수 & 로그  -->


    <!-- 수학 / 산술1 --> 
    <block type="numpy_arithmetic_operations1">
      <value name="numpy_Arithmetic_operations1_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 수학 / 산술1  -->


    <!-- 수학 / 산술2 --> 
    <block type="numpy_arithmetic_operations2">
      <value name="numpy_Arithmetic_operations2_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 수학 / 산술2  -->


    <!-- 수학 / 복소수 --> 
    <block type="numpy_handling_complex_numbers">
      <value name="numpy_Handling complex numbers_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 수학 / 복소수  -->


    <!-- 수학 / 합계 & 차이 --> 
    <block type="numpy_sums_differences">
      <value name="numpy_Sums_differences_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 수학 / 합계 & 차이  -->

    <label text="선형대수"></label>
    <!-- 선형 / 행렬 &벡터 -->
    <block type="numpy_matrix_vector_products">
      <value name="numpy_Matrix_vector_products_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 선형 / 행렬 &벡터 -->


    <!-- 선형 / 분해 --> 
     <block type="numpy_matrix_decomposition">
      <value name="numpy_Matrix_Decomposition_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 선형 / 분해  -->

    <label text="논리"></label>
    <!-- 논리 / 배열 --> 
    <block type="numpy_array_contents">
      <value name="numpy_Array_contents_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 논리 / 배열  -->


    <!-- 논리 / 비교 --> 
    <block type="numpy_comparison">
      <value name="numpy_Comparison_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 논리 / 비교  -->
    
    <label text="문자열"></label>
    <!-- 문자열 / 연산1 --> 
    <block type="numpy_string_operations">
      <value name="numpy_String_operations_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 문자열 / 연산1  -->


    <!-- 문자열 / 연산2 --> 
    <block type="numpy_string_operations2">
      <value name="numpy_String_operations2_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 문자열 / 연산2  -->

     <!-- 문자열 / 정보 --> 
     <block type="numpystring_information">
      <value name="numpyString_information_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 문자열 / 정보  -->

    <label text="배열"></label>
    <!-- 배열조작 / 모양 변경 --> 
    <block type="numpy_changing_array_shape">
      <value name="numpy_Changing_array_shape_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 모양 변경  -->


    <!-- 배열조작 / 전치 --> 
    <block type="numpy_transpose_like_operations">
      <value name="numpy_Transpose_like_operations_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 전치  -->


    <!-- 배열조작 / 차원수 변경 --> 
    <block type="numpy_changing_number">
      <value name="numpy_Changing_number_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 차원수 변경   -->

    
     <!-- 배열조작 / 종류 변경 --> 
     <block type="numpy_changing_kind_array">
      <value name="numpy_Changing_kind_array_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 종류 변경   -->


    
    <!-- 배열조작 / 결합 --> 
    <block type="numpy_joining_arrays">
      <value name="numpy_Joining_arrays_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 결합   -->


    <!-- 배열조작 / 분할 --> 
    <block type="numpy_splitting_arrays">
      <value name="numpy_Splitting_arrays_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 분할 -->


    <!-- 배열조작 / 추가 & 제거 --> 
    <block type="numpy_adding_removing_elements">
      <value name="numpy_Adding_removing_elements_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 추가 & 제거 -->


    <!-- 배열조작 / 재정렬 --> 
    <block type="numpy_rearranging_elements">
      <value name="numpy_Rearranging_elements_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열조작 / 재정렬 -->

    <!-- 배열생성 / 0 & 1 --> 
    <block type="numpy_ones_and_zeros">
      <value name="numpy_Ones and zeros_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열생성 / 0 & 1 -->


    <!-- 배열생성 / 기존데이터 --> 
    <block type="numpy_from_existing_data">
      <value name="nnumpy_From_existing_data_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열생성 / 기존데이터 -->

    <!-- 배열생성 / 레코드 --> 
    <block type="numpy_creating_record_arrays">
      <value name="numpy_Creating_record_arrays_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열생성 / 레코드 -->


    <!-- 배열생성 / 숫자 범위 --> 
    <block type="numpy_numerical_ranges">
      <value name="numpy_Numerical_ranges_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열생성 / 숫자 범위 -->


    <!-- 배열생성 / 행렬 --> 
    <block type="numpy_building_matrices">
      <value name="numpy_Building_matrices_val"> 
        <block type="class_func_param"></block>
      </value>  
    </block> 
    <!-- 배열생성 / 행렬 -->
   </category>
    <!-- ************************************************** ************************* *************************  -->
    <!-- *************************************** 2020-09-07, Pandas Blocks  ***********************************  -->
    <!-- ************************************************** ************************* *************************  -->
    <!-- 2020-09-20 양승국 수정-->
    <category name="%{BKY_CATEGORY_PANDAS}" colour="%{BKY_PANDAS_HUE}"> <!--판다스(Pandas)-->
      <!-- 2020-09-20 양승국 판다스 전체수정-->
      <!-- <block type="import_lib">
          <value name="var">
            <block type="variables_get">
              <field name="VAR"></field>
            </block>
          </value>
        </block> -->
      <!-- pandas 라이브러리 -->
      <block type="csv_library"></block>
      <!-- <block type="pyo_lib"></block> -->
      <!-- csv프레임 -->
      <block type="csvdataframe_J">
        <value name="input_var">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
        <value name="csv">
          <block type="csv2"></block>
        </value>
      </block>

      <block type = "csv_url">
        <value name="va">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>

      <!-- 2020-09-09 양승국 -->
      <!-- zip리스트 -->
      <block type="pandas_datalist">
        <value name="frm_var">
          <block type="variables_get">
            <field name="VAR">my_list</field>
          </block>
        </value>
        <value name="data_lst">
          <block type="createColumn"></block>
        </value>
      </block>
      <!-- zip 프레임 -->
      <block type="pandas_dataframe">
        <value name="df_va">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
        <value name="lst">
          <block type="variables_get">
            <field name="VAR">my_list</field>
          </block>
        </value>
      </block>
      <!-- 2020-09-09 양승국-->
      <!-- 일괄변경 -->
      <block type="pandas_conversion">
        <value name="pa_frm">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
        <value name="pa_cul">
          <shadow type="indata">
            <field name="indata1">name</field>
          </shadow>
        </value>
        <value name="pa_data">
          <shadow type="indata">
            <field name="indata1">null</field>
          </shadow>
        </value>
        <value name="pa_chidata">
          <shadow type="indata">
            <field name="indata1">50</field>
          </shadow>
        </value>
      </block>
      <!-- 결측치삽입 -->
      <block type="fill_null_data">
        <value name="DATA">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
      </block>
      <!-- 2020-09-10 양승국-->
      <!-- 결측치삭제 -->
      <block type="pandas_mis_del">
        <value name="DATA_del">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
      </block>
      <!-- 범위설정 -->
      <block type="select_row_column_value">
        <value name="select_data">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
        <value name="select_row_locate">
          <block type="selec_value_all"></block>
        </value>
        <value name="select_column_locate">
          <block type="selec_value_all"></block>
        </value>
      </block>
      <!-- 전체범위 -->
      <block type="selec_value_all"></block>
      <!-- 부분범위 -->
      <block type="iloc_range"></block>

      <!-- <block type="pandas_print"></block> -->
      <!-- 행열삭제 -->
      <block type="select_row_delete">
        <value name="select_data">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
      </block>
      <!-- <block type="save_image"></block> -->
      <!-- <block type="list"></block> -->
      <!-- <block type="header"></block> -->
      <!-- 행렬추출 -->
      <block type="select_row_list">
        <value name="list_data">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
      </block>
      <!-- <block type="pandas_plus">
        <value name="pl_v">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
      </block> -->
      <!-- 열 추가 -->
      <block type="df_add_col"></block>
      <!-- 행렬크기 -->
      <block type="row_count">
        <value name="select_value">
          <block type="variables_get">
            <field name="VAR">df</field>
          </block>
        </value>
      </block>
      <!-- 2020-09-16 양승국-->
      <!-- <block type="nm"></block> -->
      <!-- 시리즈생성 -->
      <block type="pandas_series">
        <value name="ser_var">
          <block type="variables_get">
            <field name="VAR">ds</field>
          </block>
        </value>
        <value name="ser_data">
          <block type="pandas_series_data"></block>
        </value>
      </block>
      <!-- 시리즈 concat -->
      <block type="pandas_concat">
        <value name="cat_vl">
          <block type="variables_get">
            <field name="VAR">ds</field>
          </block>
        </value>
      </block>
      <!-- 2020-09-17 양승국 블록추가 -->
      <!-- 시리즈 merge -->
      <block type="pandas_merge">
        <value name="mer_var">
          <block type="variables_get">
            <field name="VAR">ds</field>
          </block>
        </value>
        <value name="connet_way">
          <block type="pandas_merge_oncol"></block>
        </value>
      </block>
      <!-- 공통컬럼0 -->
      <block type="pandas_merge_oncol"></block>
      <!-- 공통컬럼x -->
      <block type="pandas_merge_lron"></block>
      <!-- 시리즈그룹화 -->
      <block type="groupby_series">
        <value name="colName">
          <block type="groupby_series_"></block>
        </value>
      </block>
      <!-- 프레임그룹화 -->
      <block type="groupby_dataFrame">
        <value name="colName">
          <block type="groupby_series_"></block>
        </value>
      </block>

      <!-- 2020-10-15 정지현 컬럼명 변경 -->
      <block type="df_col_rename"></block>

      <!-- <block type="column_count"></block> -->
      <!-- <block type="image_list"></block> -->
      <!-- 결측치 조회 -->
      <block type="missing_value_inquiry">
        <value name="mis_data">
          <block type="variables_get">
            <field name="VAR">pd</field>
          </block>
        </value>
      </block>
      <!-- 통계 정보 조회 -->
      <block type="stats_inquiry">
        <value name="inq_data">
          <block type="variables_get">
            <field name="VAR">pd</field>
          </block>
        </value>
      </block>

      <!-- <block type="pan_aray">
        <value name="aray_array">
          <block type="variables_get">
            <field name="VAR">array</field>
          </block>
        </value>
      </block> -->
      <block type="corr_inquiry"></block>
      <block type="df_sort"></block>
      <block type="df_columns"></block>
      <block type="df_index"></block>
      <block type="df_values"></block>
    </category>

    <!-- ************************************************** ************************* *************************  -->
    <!-- ***************************************  Pandas Blocks end  ******************************************  -->
    <!-- ************************************************** ************************* *************************  -->

    <!-- # 시각화 부분 #  -->
    <category name="%{BKY_CATEGORY_MATPLOT}" colour="%{BKY_VISUAL_HUE}"> <!--맷플롯립(Matplot)-->
      <!-- 그래프 출력 -->
      <!-- <block type="select_graph_option">
        <value name="select_graph_option_location1">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow> 
        </value>
        <value name="select_graph_option_location2">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
      </block> -->
      <!-- 그래프 출력 -->

      <block type="visualization_library">
        <value name="lib_var">
          <block type="variables_get">
            <field name="VAR">plt</field>
          </block>
        </value>
      </block>
      <block type="val_vi"></block>
      <!--  matplot1 시각화 틀    -->
      <block type="matplotlib_main">
        <value name="matplotlib_main_cols">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>

        <value name="matplotlib_main_rows">
          <shadow type="math_number">
            <field name="NUM">2</field>
          </shadow>
        </value>
      </block>
      <!--  matplot1 시각화 틀    -->


      <!--  matplot2 시각화 준비      -->
      <block type="matplotlib_pre_graph">
        <value name="matplotlib_pre_graph_location1">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow> 
        </value>
        <value name="matplotlib_pre_graph_location2">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
        <value name="xx">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
        <value name="yy">
          <shadow type="indata">
            <field name="indata1"></field>
          </shadow>
        </value>
      </block>
      <!--  matplot2 시각화 준비      -->

      <!--  matplot3 시각화 하기      -->
      <!-- <block type="matplotlib_graph_end"></block> -->
      <!--  matplot3 시각화 하기      -->


      <!--  matplot plt.plot()      -->
      <block type="matplotlib_plt_plot"></block>
      <!--  matplot plt.plot()      --> 


      <!--  matplot plt.show()      -->
      <block type="matplotlib_plt_show"></block>
      <!--  matplot plt.show()      -->

      <!--  사이킷런 시각화 하기      -->
      <!-- <block type="lrgraph"></block>
      <block type="logicgraph"></block> -->
      <block type="vis_tree"></block>
      <!--  사이킷런 시각화 하기      -->
    </category>

    <!-- 웹크롤링 -->
    <!-- 2020.10.31 교수님 지시로 임시로 안보이게함
    <category name="데이터 수집" colour="%{BKY_CLASS_HUE}">
      <block type="script_block"></block>
    </category>
    -->
    <!-- 웹크롤링 -->

    <category name="%{BKY_CATEGORY_SCIPY}" colour="%{BKY_SCIPY_HUE}"> <!--사이파이(Scipy)-->
      <block type="import_scipy"></block>
      <block type="curve_fit"></block>
      <block type="univariatespline"></block>
      <block type="quad"></block>
    </category>
    <!-- # 시각화 부분 #  -->

    <category name="%{BKY_CATEGORY_SCIKIT}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--사이킷런(Scikit)-->
      <category name="%{BKY_CATEGORY_DATASET}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--데이터셋 (Dataset)-->
        <block type="import_dataset"></block>
        <block type="random_import"></block>
        <block type="make_circles"></block>
        <block type="fetch_openml"></block>
        <block type="csv3"></block>
      </category>

      <category name="%{BKY_CATEGORY_PREPROCESSING}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--전처리 (Preprocessing)-->
        <block type="sklearn.preprocessing"></block>
        <block type="labelencoder"></block>
        <block type="train_test_split"></block>
        <block type="polynomialfeatures"></block>
        <block type="normal">
          <value name="Normalization_data">
            <block type="variables_get">
              <field name="VAR">df</field>
            </block>
          </value>
        </block>
        <block type="onehotencoder"></block>
      </category>

      <category name="%{BKY_CATEGORY_LINEAR}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--선형모델(Linear)-->
        <block type="import_linear"></block>
        <!-- <block type="scikit_learn"></block> -->
        <!--지현이가 만든거 여기에 잠들다.-->
        <block type="linear_regression"></block>
        <block type="sgd_regressor"></block>
        <block type="ridge"></block>
        <block type="bayesian_ridge"></block>
        <block type="logistic_regression"></block>
        <block type="logistic_regression_cv"></block>
        <block type="ridge_classifier"></block>
        <block type="sgd_classifier"></block>
        <block type="perceptron"></block>
        <block type="coef"></block>
        <block type="intercept"></block>
      </category>
      <category name="%{BKY_CATEGORY_NEIGHBORS}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--KNN(Neighbors)-->
        <block type="knn_import"></block>
        <block type="kneighborsclassifier_function"></block>
        <block type="kneighborsregressor_function"></block>
        <block type="kneighborstransformer_function"></block>
        <block type="kneighbors_graph_function"></block>
      </category>

      <!-- 2020-10-14 정지현이 추가함, 기존 KNN의 클러스터 블록 가져옴 -->
      <category name="%{BKY_CATEGORY_CLUSTER}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--클러스터(Cluster)-->
        <block type="import_knn"></block>
        <block type="k_means"></block>
        <block type="dbscan"></block>
        <block type="k_means_inertia"></block>
        <block type="k_means_centroid"></block>
      </category>

      <category name="%{BKY_CATEGORY_DECISIONTREE}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--결정트리(Decisiontree)-->
        <block type="import_tree"></block>
        <block type="decision"></block>
        <block type="tree_text"></block> 
      </category>
      <category name="%{BKY_CATEGORY_SUPPORT}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--서포트 벡터 머신-->
        <block type="sklearn_svm"></block>
        <block type="linearsvc"></block>
        <block type="linearsvr"></block>


      </category>

      <category name="%{BKY_CATEGORY_ESEMBLE}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--앙상블(Esemble)-->
        <block type="sklearn_ensemble"></block>
        <block type="adaboostclassifier"></block>
        <block type="adaboostregressor"></block>
        <block type="gradientboostingclassifier"></block>
        <block type="gradientboostingregressor"></block>
        <block type="randomforestclassifier"></block>
        <block type="randomforestregressor"></block>
        <block type="isolation_forest"></block>

      </category>

      <category name="%{BKY_CATEGORY_METRICS}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--메트릭스(Metrics)-->
        <block type="import_scikit"></block> 
        <block type="model_fit"></block>
        <block type="model_score"></block>
        <block type="model_predict"></block>
        <block type="acc_score"></block>
        <block type="AUC"></block>
        <block type="AP"></block>
        <block type="precision"></block>
        <block type="mae"></block>
        <block type="mse"></block>
        <block type="median"></block> 
        <block type="metrics_fit_predict"></block>
        <block type="classification_report"></block>
      </category>
      <category name="%{BKY_CATEGORY_SELECTION}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--셀렉션(Selection)-->
        <block type="import_sivalidation"></block>
        <block type="kfold"></block>
        <!-- <block type="stratifiedkfold"></block> -->
        <block type="train_test_split"></block>
        <block type="sivalidation"></block>
      </category>
      <category name="%{BKY_CATEGORY_NEURALNETWORK}" colour="%{BKY_SCIKITLEARN_HUE}"> <!--신경망(Neuralnetwork)-->
        <block type="import_mlp"></block>
        <block type="sklearn_mlp_classifier"></block>
        <block type="sklearn_mlp_regressor"></block>
        <!-- 사이킷런 MLP 블록  -->
        <!-- <block type="make_mlp_classifier"></block>
        <block type="make_mlp_regressor"></block> -->
        <!-- <block type="mlp_classifier"></block>
        <block type="mlp_regressor"></block> -->
        <block type="bernoullirbm"></block>
        <block type="mlp_loss"></block>

      </category>



      <!-- <block type="array_get"></block> -->
      <!-- <block type="csv3"></block> -->
      <!-- <block type="sklearn_mlp_fit"></block> -->


    </category>
    <!-- 기본 블록 2020 - 09 - 07 찬영 -->
    <!-- 새 블록  딕셔너리 -->
    <category name="%{BKY_CATEGORY_DATASCIENCE}" colour="%{BKY_DATA_HUE}"> <!--데이터과학(DS)-->
    </category>
    <category name="%{BKY_CATEGORY_MACHINELEARNING}" colour="%{BKY_ML_HUE}"> <!--머신러닝(ML)-->
    </category>
    <category name="%{BKY_CATEGORY_DEEPLEARNING}" colour="%{BKY_DL_HUE}"> <!--딥러닝(DL)-->
    </category>
    <!-- <category name="프롤로그 (Prolog)" colour="%{BKY_PROLOG_HUE}">
      <block type="prolog_list">
        <value name="bar">
          <block type="funktor"></block>
        </value>
      </block>
      <block type="Rule">
        <value name="Fact">
          <block type="prolog_list_rule">
            <value name="bar">
              <block type="funktor"></block>
            </value>
          </block>
        </value>
        <value name="Rumpf">
          <block type="rumpf"></block>
        </value>
      </block>
      <block type="abfrage">
        <value name="NAME">
          <block type="separate"></block>
        </value>
      </block>
      <block type="separate"></block>
      <block type="constant"></block>
      <block type="funktor"></block>
      <block type="rumpf"></block> 
    </category> -->



    <!-- 기계 고장 진단  -->
    <!-- <category name="전공직무AI융합" colour="%{BKY_PROLOG_HUE}">
      <block type="wavfile_read">
        <value name="wavfile_read_val">
          <block type="class_func_param"></block>
        </value> 
      </block>
    </category>  -->


  </xml>

  </xml>

  <!-- code mirror -->
  <script>
    var jsEditor = CodeMirror(document.getElementById("jsCodeEditor"), {
      mode: "javascript",
      //   value: "codemirror",
      theme: "oceanic-next",
      inputStyle: "contenteditable",
      // readOnly: true,
      lineNumbers: true,
      lineWrapping: true, // 자동 줄바꿈 설정


      //   spellcheck: true,   autocorrect: true,
    });


    var pyEditor = CodeMirror(document.getElementById("pyCodeEditor"), {
      mode: "python",
      //   value: "codemirror",
      theme: "oceanic-next",
      inputStyle: "contenteditable",
      // readOnly: true,
      lineNumbers: true,
      lineWrapping: true, // 자동 줄바꿈 설정
      // spellcheck: true,
      extraKeys: {
        "Ctrl-Space": "autocomplete"
      },
      //   spellcheck: true,   autocorrect: true,
    });
  </script>

  <script id="jsScript" type="application/javascript">
    // var codeArea = document.getElementById("textArea"); // 코드 나타나는 부분 
    var codeArea = jsEditor.getValue();

    var demoWorkspace = Blockly.inject( // 블록이 나타나는 부분 
      "blocklyDiv", {
        toolbox: document.getElementById("toolbox"), // 툴박스  보이기 
        grid: // 그리드 보이기 
        {
          spacing: 0,
          length: 3,
          colour: '#ccc',
          snap: true
        },
        zoom: // 줌 기능 
        {
          controls: true,
          wheel: true,
          startScale: 1.0,
          maxScale: 3,
          minScale: 0.3,
          scaleSpeed: 1.2
        },
        trashcan: true, // 휴지통
        /*theme: {
          'blockStyles': {
            "list_blocks": {
              "colourPrimary": "#4a148c",
              "colourSecondary": "#AD7BE9",
              "colourTertiary": "#CDB6E9"
            }
          },
          'categoryStyles': {
            "list_category": {
              "colour": "#4a148c"
            }
          },
          'componentStyles': {
            'toolboxBackgroundColour': '#848484', // toolbox background
            'toolboxForegroundColour': '#fff',
            'flyoutBackgroundColour': '#D8D8D8', // toolbox color
          }
        }*/
        renderer: "zelos"
      }

    );

    // 생성될 코드에 대해 선택하는 부분       
    var jsCode = Blockly.JavaScript.workspaceToCode(demoWorkspace); // 자바 스크립트 선택 
    var pyCode = Blockly.Python.workspaceToCode(demoWorkspace); // 파이썬 선택 

    var delCount = 0;
    var fileState = 0;
    var fileName = "";

    // ==================================
    // 블록 저장하기 
    //===================================  
    function saveBlock() {
      var xml = Blockly.Xml.workspaceToDom(demoWorkspace);
      var p_xml = Blockly.Xml.domToPrettyText(xml);
      // 다른이름으로
      var filename = prompt("다른이름으로 저장."); 
      var fileObject = new File([p_xml], filename+".xml");
      saveAs(fileObject);
    }

    // ==================================
    // 블록 불러오기 
    //===================================   
    function loadBlock() {
      var reader = new FileReader();
      var files = document.getElementById("file").files;
      var file = files[0];
      if (file) {
        reader.onload = function (e) {
          var xml = reader.result;
          var dom = Blockly.Xml.textToDom(xml);
          Blockly.Xml.appendDomToWorkspace(dom, demoWorkspace);
          fileName = file.name;

          try {
            var pyCode = Blockly.Python.workspaceToCode(demoWorkspace);
            pyEditor.setValue(pyCode);
          } catch (e) {
            console.log('python 코드가 매핑되어 있지 않습니다. Error : ' + e);
          }
          try {
            var jsCode = Blockly.JavaScript.workspaceToCode(demoWorkspace);
            jsEditor.getValue() = jsCode;

          } catch (e) {
            console.log('java script 코드가 매핑되어 있지 않습니다. Error : ' + e);
          }
        };
        reader.readAsText(file);
      }
    }

    // ==================================
    // 코드 갱신하기 
    //===================================  
    function codeUpdate(event) {
      async function coderun() {
        try {
          var pyCode = Blockly.Python.workspaceToCode(demoWorkspace);
          pyEditor.setValue(pyCode);
        } catch (e) {
          console.log('python 코드가 매핑되어 있지 않습니다. Error : ' + e);
        }
      }
      coderun().then(() => {
        try {
          var jsCode = Blockly.JavaScript.workspaceToCode(demoWorkspace);
          jsEditor.setValue(jsCode);
        } catch (e) {
          console.log('java script 코드가 매핑되어 있지 않습니다. Error : ' + e);
        }
      });


    }

    // ==================================
    // 결과 지우기 2020.10.04 남지원 수정 
    //===================================  
    function clear_result() {
      //원본 document.getElementById("exeArea").value = "";
      $("#exeArea").empty();
    }

    // ==================================
    // 파일로 저장하기
    //===================================  
    function file_save() {
      //var code_java = Blockly.JavaScript.workspaceToCode(demoWorkspace);
      //var blobObject = new Blob([code_python, code_java]);
      //saveAs(blobObject, "download.js");
      
      var code_python = Blockly.Python.workspaceToCode(demoWorkspace);
      // 이 부분 추가로 블럭뿐만 아니라 코드 쓴것도 저장됨
      var code = pyEditor.getValue();
      var blobObject = new Blob([code]);  
      var filename = prompt("다른이름으로 저장.");
      //window.location.href = window.URL.createObjectURL(blobObject);
      //saveAs(blobObject, "download.py"); 
      saveAs(blobObject, filename+".py"); 
    }

    // ==================================
    // 블록을 선택했을 때 
    //=================================== 
    function whenSelected(event) {
      if (event.type == Blockly.Events.CREATE) {
        var block = demoWorkspace.getBlockById(event.blockId);
        console.log('블록이 선택됨1');
      }

      if (event.type == Blockly.Events.UI && event.element === "click") {
        var block = demoWorkspace.getBlockById(event.blockId);
        if ('csv2' == block.type) {
          openTextFile(event.blockId);
        }
        if ('csv3' == block.type) {
          openTextFile(event.blockId);
        }

        if ('data_csv_read' == block.type) {
          Show_csv();
        }
      }
    }
    demoWorkspace.addChangeListener(codeUpdate);
    demoWorkspace.addChangeListener(whenSelected);
  </script>

  <!-- ==================================
  ====== 블록 실행
  ===================================-->
  <script>
    //새로운 실행방법
    function runButton() {
      // 그래프 위쪽 삭제
      $("#graph1").remove();
      $("#csv_show").before("<div id='graph1' style=\"height:500px; width:900;\"><img id='pyplotfigure' /></div>");

      // 그래프같은 이미지들을 싹다 잡아옴 plt.show()하면 바로 되는이유
      globalThis.iodide = {
        output: {
          element: (tagName) => {
            let outputPane = document.createElement(tagName);
            document.querySelector("#graph1").appendChild(outputPane);
            console.log(outputPane)
            return outputPane;
          }
        }
      };

      Blockly.Python.addReservedWords('code');

      var code = pyEditor.getValue();
      Blockly.JavaScript.addReservedWords('code2');
      var code2 = jsEditor.getValue();
      
      // 이 부분이 코드 싹다 잡아와서 출력
      languagePluginLoader.then(() => {
        pyodide.runPython(`
                    import sys
                    import io
                    sys.stdout = io.StringIO()
                    `);

      });
      // var code = document.getElementById("pyCodeEditor");
      // 순차적 실행을 위해 놓은 코드 async, .then()
      async function runcode() {
        console.log(code);
        console.log(typeof (code));
        var exe = document.getElementById('exeArea');
        languagePluginLoader.then(() => {
          try {
            exe.innerHTML = pyodide.runPython(code);
            let stdout = pyodide.runPython("sys.stdout.getvalue()"); // 결과값을 싹 받아줌
            exe.innerHTML = stdout;
          } catch (e) {
            exe.innerHTML = e;
          }
        });
      }
      
      // runcode끝내고 또 돌림, 테이블 형식 블록을위해 이걸 넣어줌
      runcode().then(() => {
        if(eval(code2)==undefined){
          document.getElementById('exeArea').innerHTML+='\n';
        }
        else{
          console.log("error : javascript code error");
      }
      });

    }
    // 기존 실행 버튼
    // function runButton() {
    //   Blockly.Python.addReservedWords('code');
    //   var code = pyEditor.getValue();

    //   Blockly.JavaScript.addReservedWords('code2');
    //   var code2 = jsEditor.getValue();

    //   async function runcode() {
    //     languagePluginLoader.then(() => {
    //       try { pyodide.runPython(code); }
    //       catch (e) { document.getElementById('exeArea').innerHTML = e; }
    //     });
    // 명성이형 그래프 추가(일단 주석처리)
    // languagePluginLoader.then(await function () {
    //   if (DL_Gra == "chcked") { document.getElementById("pyplotfigure").src = pyodide.globals.img_str;}
    // });
    // DL_Gra = 0;
    //   };

    //   runcode().then(() => {
    //     document.getElementById('exeArea').innerHTML = eval(code2);
    //   });

    // };


    function openTextFile(blockId) {
      var input = document.createElement("input");
      input.type = "file";
      input.accept = ".csv"; // 확장자가 xxx, yyy 일때, ".xxx, .yyy"
      input.onchange = function (e) {
        $("#tblshow").empty();
        $("#tblhead").empty();
        ///////////////////////////////////////////
        var fileArray = new Array(); // csv to json?
        if (e.target.files != undefined) {
          var reader = new FileReader();
          reader.onload = function (e) {
            var csvval = e.target.result.split("\n");
            var csvvalue = csvval[0].split(",");
            var inputrad = "";
            // csv view! header 1
            for (var i = 0; i < csvvalue.length; i++) {
              var header = csvvalue[i];
              addOptions(header);
            }
            csvval[0] = csvval[0].replace('\r', '');
            // row
            var cnt = (csvval.length < 2000) ? csvval.length : 2000;
            for (var i = 1; i < cnt - 1; i++) {
              csvval[i] = csvval[i].replace('\r', '');
              var cols = csvval[i].split(',');
              var fileObject = new Object();
              for (var j = 0; j < cols.length; j++) {
                var value = cols[j];
                var name = csvval[0].split(',')[j] // hedaer name
                fileObject[name] = value; // value
                // table body add
              }
              fileArray.push(fileObject);
            }
            create_table($("#csv_show")[0], JSON.stringify(fileArray));
            // // 파일 set
            var block = demoWorkspace.getBlockById(blockId);
            var bId = Blockly.mainWorkspace.getBlockById(blockId)
            block.setFieldValue(JSON.stringify(fileArray), 'csv_url'); // csv_url -> field_input ID
          };
          reader.readAsText(e.target.files.item(0), /* optional */ "euc-kr");
        }
      };

      input.click();
    }

    function processFile(file) {
      var reader = new FileReader();
      reader.onload = function () {
        var fileResult = reader.result;
        var val = sessionStorage.setItem('file', fileResult);
      };
      reader.readAsText(file, /* optional */ "cp949");
    }

    /* 그래프 */
    const metrics = ['loss', 'val_loss', 'acc', 'val_acc']
    const container = {
      name: 'Model Training',
      styles: {
        height: '1000px'
      }
    };

    async function saveModel(model) {
      model.save('localstorage://my-model');
      alert('완료되었습니다.');
    }

    // canvas 활성화 & 비활성화
    /*function canvas_power() {
      var canvasState = $("#canvas")[0];
      var btnSave = $("#btn_save")[0];
      if (canvasState.style.display == "" || canvasState.style.display == "none") {
        canvasState.style.display = "block";
        $("#btn_save")[0].style.visibility = "visible";
        $("#btn_canvas").val("그림판 비활성화");
      } else {
        canvasState.style.display = "none";
        $("#btn_save")[0].style.visibility = "hidden";
        $("#btn_canvas").val("그림판 활성화");
      }
    }
    */

    // canvas 저장하기
    const alphaPixel = []

    function canvas_save() {
      var download = $("#download")[0];
      var canvas = $("#canvas")[0];
      var c = document.getElementById("canvas");
      var ctx = c.getContext("2d");
      console.log(ctx);
      var pixel = ctx.getImageData(0, 0, 28, 28).data;
      for (i = 3, idx = 0; i < pixel.length; i += 4) {
        alphaPixel[idx] = pixel[i];
        idx++;
      }
      console.log(alphaPixel);
    }



        // $("#lan").attr("src", "/js/blockly/msg/js/ko.js");
           

    

    /*
     * 코드미러 화면 전환(python&javascript)
     */
    $("#display_select").change(function () {
      var selectName = $(this).find(":selected").val();
      var pyEditor = $("#pyCodeEditor");
      var jsEditor = $("#jsCodeEditor");

      if (selectName == "javascript") {
        jsEditor.css("visibility", "visible");
        pyEditor.css("visibility", "hidden");
      } else if (selectName == "python") {
        pyEditor.css("visibility", "visible");
        jsEditor.css("visibility", "hidden");
      }
    });

    // 화면에 찍기 프린트
    function printc(x) {
      var savetext = $('#exeArea').val();
      $('#exeArea').val(savetext + x + '\n');
    }

    // **************************************
    // ********   파일 열기     **********//
    // **************************************//   
    async function Show_csv(test) {

      var Show_CSV_Data_S = await Data_process();


      console.log("Show_csv : Load_csv\n", Show_CSV_Data_S);

      var rows = Show_CSV_Data_S.split(/\r\n|\n/);
      var cols = Show_CSV_Data_S.split(/\r\n|\n/)[0].split(/,/);



      var Get_CSV_DATA = Array.from(Array(cols.length), () => new Array((rows.length) - 1));
      for (var i = 0; i < (rows.length) - 1; i++) {
        for (var j = 0; j < cols.length; j++) {
          test = rows[i].split(/,/)[j];
          Get_CSV_DATA[j][i] = test;
        }
      }
      var rows_leng = rows.length;
      var cols_leng = cols.length;

      draw_table(Get_CSV_DATA, rows_leng, cols);

      return test;
    }
    // **************************************
    // ********   테이블 그리기      **********//
    // **************************************//  
    function draw_table(Get_CSV_DATA, Get_CSV_Header) {

      var NPTD_Data = Array.from(Array(Get_CSV_DATA[0].length), () => new Array(Get_CSV_DATA.length));

      for (var i = 0; i < Get_CSV_DATA.length; i++) {
        for (var j = 0; j < Get_CSV_DATA[0].length; j++) {
          NPTD_Data[j][i] = Get_CSV_DATA[i][j];
          // console.log(NPTD_Data[j][0]);
        }
      }

      var NPTD_Data_Header = Array.from(Array(NPTD_Data.length), () => new Array(NPTD_Data[0].length));


      //--------------------------------- data 속성 ---------------------------// 
      var data = [{
        type: 'table',

        //--------------헤더 설정 ---------------// 
        header: {
          values: Get_CSV_Header,
          //     values: [["<b>EXPENSES</b>"], ["<b>Q1</b>"],["<b>Q2</b>"], ["<b>Q3</b>"], ["<b>Q4</b>"]], 

          //     function(Table_Chart){
          //         for (var j = 0; j < Table_Chart[0].length; j++) {   //테이블 요소만 가져오기 
          //            [Table_Chart[j][0]] 
          //            }
          //   },

          //     align: "center",
          line: {
            width: 1,
            color: 'black'
          },
          fill: {
            color: "grey"
          },
          font: {
            family: "Arial",
            size: 12,
            color: "white"
          }
        },
        //--------------헤더 설정 ---------------//

        cells: {
          values: NPTD_Data,
          align: "center",
          line: {
            color: "black",
            width: 1

          },
          font: {
            family: "Arial",
            size: 11,
            color: ["black"]
          }
        }
      }]


      var title = "테이블 확인 하기 "
      var graph = "graph1"



      var layout = {

        title: title

      }
      //--------------------------------- data 속성 ---------------------------//
      Plotly.newPlot(graph, data, layout);
    }



    // **************************************
    // ********   파일 열기     **********//
    // **************************************//
    function Data_process() {

      return new Promise(function (resolve, rejcet) {

        var Show_CSV_Data = document.createElement("input");
        Show_CSV_Data.setAttribute("id", "Data_S_read_CSV");
        Show_CSV_Data.type = "file";
        Show_CSV_Data.accept = ".csv"; //loadFile    
        Show_CSV_Data.onchange = function (event) {

          if (event.target.files != undefined) {
            var file_result = event.target.files;
            // console.log("fitle_result",file_result); 
            testing_1 = event.target.files[0].name;

            var reader = new FileReader();
            reader.onload = function (e) { //들어오기전에 먼저 실행됨  
              var fileResult = e.target.result;

              resolve(fileResult);
            };
          }
          reader.readAsText(event.target.files[0], /* optional */ "euc-kr");
          // testing_1 = document.getElementById('Data_S_read_CSV').value;
        }

        Show_CSV_Data.click();

      });
    }


    // **************************************
    // ********  데이터셋_불러오기     **********//
    // **************************************//  

    //팝업창 열기 블록 
    function datasets_load_lms() {
      window.open("http://localhost:8000/datasets_load_lms", "a",
        "width=600, height=500, left=100, top=50, directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,resizable=no,"
        );
    }


    //       <a href="www.naver.com" 
    //           onMouseOver="window.status='';return true"; 
    //           onclick="window.status='';return true"; 
    //           onfocus="window.status='';return true"; 
    // > 
    // <img id="tab01" src="../images/main/tab_01_01.gif"> 
    //  </a> 




    function exportToCsv(filename, rows) {

      console.log("fileName_check", fileName);
      console.log("rows_check", rows);

      var processRow = function (row) {
        var finalVal = '';
        for (var j = 0; j < row.length; j++) {
          var innerValue = row[j] === null ? '' : row[j].toString();
          if (row[j] instanceof Date) {
            innerValue = row[j].toLocaleString();
          };
          var result = innerValue.replace(/"/g, '""');
          if (result.search(/("|,|\n)/g) >= 0)
            result = '"' + result + '"';
          if (j > 0)
            finalVal += ',';
          finalVal += result;
        }
        return finalVal + '\n';
      };

      var csvFile = '';
      for (var i = 0; i < rows.length; i++) {
        csvFile += processRow(rows[i]);
      }

      var blob = new Blob(["\ufeff" + csvFile], {
        type: 'text/csv;charset=utf-8;'
      }); //utf-8  (["\ufeff"+data+], {type: 'text/csv;charset=utf-8;'}); // 기존 ([csvFile], { type: 'text/csv;charset=ANSI;' });
      if (navigator.msSaveBlob) { // IE 10+  
        navigator.msSaveBlob(blob, filename);
      } else {
        var link = document.createElement("a");
        if (link.download !== undefined) { // feature detection
          // Browsers that support HTML5 download attribute
          var url = URL.createObjectURL(blob);
          link.setAttribute("href", url);
          link.setAttribute("download", filename);
          link.style.visibility = 'hidden';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }
      }
    }

    function Check_matplotlib_user_input(a, b) {
      if (a == 1 && b == 1) {
        DL_Gra = "graph_both_1";
      } else if (a == 1 || b == 1) {
        DL_Gra = "graph_or_1";
      } else {
        DL_Gra = 0;
      }
    }
  </script>

  <!-- <script src="/js/utils/canvas.js"></script> 그림판 -->

  <!-- 2020-12-05 양승국 언어변경 -->
  <script>
    $("#language").change(function () {
      var selectName = $(this).find(":selected").val();

      if (selectName == "kor") {
        $("#lan").remove();
        var script = document.createElement('script');
        script.id = 'lan';
        script.src = '/js/blockly/msg/js/ko.js'; // script url.
        document.body.appendChild(script);
      }
      else if (selectName == "eng") {
        $("#lan").remove();
        var script = document.createElement('script');
        script.id = 'lan';
        script.src = '/js/blockly/msg/js/en.js'; // script url.
        document.body.appendChild(script);
      }  
    });

    
  </script>
  <!-- 데이터 입력 bug fix -->
  <script>
    function input_fixed(text) {
        return prompt(text);
    };
    
    languagePluginLoader.then(() => {
      pyodide.runPythonAsync(`
    from js import input_fixed
    input = input_fixed
    __builtins__.input = input_fixed
    `);
    });
    </script>

    <!-- 기태 처리 (파일) 20.12.29------------------------------------------------------------------------->
    <!-- 파일 입력 부분과 아래 스크립트 추가 -->
    <input type="file" id="file_input" name="file-input"
    accept=".jpg, .png, .txt, .csv"
    onchange="loadFile(this);"
    />

    <script>
    var datas="";
    let fss;
    let fileName2="temp";      
    var rows = "";

    function start(){
      console.log("start");
      datas = "123 test 한글 처리";            
    }  

    function loadFile(sender) {
      var reader = new FileReader();
        
      reader.onload = function (sender) {
        datas = sender.target.result;          
        console.log("datas", datas);
        fss.writeFileSync(fileName2, datas);
      };

      fileName2 =  sender.files[0].name;
      reader.readAsText(sender.files[0]);        
    }

    BrowserFS.install(window);
      BrowserFS.configure({
          fs: "LocalStorage"
      }, function(e) {
          fss = require('fs');
          var fs = BrowserFS.BFSRequire('fs');          
          fss.writeFileSync(fileName2, "");
          
          languagePluginLoader.then(async ()=>{            
            pyodide.loadPackage(['numpy', 'pandas', 'matplotlib', 'scipy']).then(() => {
              console.log("Module loaded.");
            })
             
            let FS = pyodide._module.FS;
            let PATH = pyodide._module.PATH;
            console.log(FS.mount);
            console.log(PATH);

            // Create an Emscripten interface for the BrowserFS
            var BFS = new BrowserFS.EmscriptenFS(FS, PATH);
            // Create mount point in Emscripten FS
            FS.createFolder(FS.root, 'data', true, true);
            // Mount BrowserFS into Emscripten FS
            FS.mount(BFS, {root: '/'}, '/data');

            pythonCode = `              
              import sys
              from io import StringIO
              sys.stdout = StringIO()        
            `

            languagePluginLoader.then(() => {
              return pyodide.loadPackage(['micropip'])
            }).then(() => {
              pyodide.runPython(pythonCode);
            })          
          });
      });
    </script>    
    <!-- 기태 처리 (파일) 끝 20.12.29 ------------------------------------------------------------------------->
</body>

<style>
  #loading_image1 {
    position: relative;
    padding-top: 1.5vh;
    padding-left: 3vh;
    padding-right: 2vh;
    height: 30px;
  }

  #loading_image2 {
    position: relative;
    padding-top: 4vh;
    padding-left: 3vh;
    padding-right: 2vh;
    height: 30px;
  }
</style>

</html>